{% extends 'base.html' %}
{% load static %}
{% load l10n %}
{% block title %}
  ТОВАРЫ  
{% endblock %} 
{% block content %}
  <div class="container" style="padding-top: 10rem">
    <div class="row">
      <div class="col-md-3">                
        <ul class="list-group">                     
          {% for subcategory in subcategories_list %}          
          <a href="{% url 'products:products_list' subcategory.slug %}" class="list-group-item list-group-item-action active">
            {{ subcategory.name }}
          </a>              
          {% endfor %}
      </ul>  
      </div>
      <div class="col-sm-12 col-md-9">
        <h2>{{ subcategory.name }}</h2>                  
           
        <table class="table table-striped table_boarded table-hover">        
          <thead>
            <tr>
                <th>Товар</th>
                <th>Длина, м</th>
                <th>Цена за тонну, р</th>
                <th>Цена за метр, р</th>
                <th>Метраж, м</th>
                <th>Вес, кг</th>
                <th>Купить</th>                                
            </tr>
            </thead>      
            <tbody>            
            {% for product in products_list %}            
            <tr class ="product-data" id="form_buying_product">
              <td class="text-center block-3">
                <a href="{% url 'products:product_detail' product.id %}">
                {{ product.subcategory.name }}
                <small class="length-info">{{product.size}}</small>
                </a>
              </td>
              <td>{{ product.length }}</td>              
              <td>{{ product.price_tonn }}</td>
              <td>{{ product.price_item|floatformat:0 }}</td>
              <form class="product" id="form_product" action="{% url 'orders:cart_adding' %}" method="post">{% csrf_token %}                               
                <td>
                  <input type="number" min="0" step ="1" 
                    class="product-number form-control" id="quantity"
                    aria-label="product-number"  data-length="{{ product.length }}" data-weight="{{ product.weight_item|unlocalize }}">
                </td>  
                <td id="weight-item"><input type="number" min="0" 
                    class="product-weight form-control" id="weight" aria-label="product-weight"
                    data-length="{{ product.length }}" data-weight="{{ product.weight_item|unlocalize }}"
                    value=""><p class="text-center"><small style="color:blue">Вес ед. {{ product.weight_item|unlocalize }} кг.</small></p>
                </td>
                <td><a href="{% url 'orders:cart_adding' %}">
                    <button class="btn btn-success btn-buy" type="submit" id="submit_btn"
                            data-product_id = "{{product.id}}"
                            data-name = "{{product.subcategory.name}}"
                            data-price = "{{product.price_item}}"
                    >В машину</button></a>                   
                </td> 
              </form>                              
            </tr>                          
           {% endfor %}                  
           </tbody>                      
        </table> 
          
      </div>        
    </div>            
  </div>  
{% endblock %}



